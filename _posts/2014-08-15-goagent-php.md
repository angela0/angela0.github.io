---
layout: post
title: "怎么使用goagent代理的php模式"
data: 2014-08-15
categories:
- notes
tags:
- goagent
- php模式

---

　　无论你是寻找天朝无解的技术，还是观看剧情简单的某岛动作片，由于某墙的强力阻拦，你不得不翻过它。这貌似是一项技术活。不过在我朝以及他朝‘技术人员’的不断努力之下，各种越墙手段层出不穷。如果高帅富的话赶紧使用VPN，别在这瞎折腾了；但作为穷酸学生党，还是来看看这个goagent怎么用吧。

　　goagent在越墙界被广泛熟知，但大家一直使用的是简单好用的GAE。本来这个挺好：谷歌服务、高速稳定、配置简单、价格低廉、0元一件。但是前段时间google被万恶的Great WAll屏蔽了，虽然仍可用，但用着烦心。So，我们还可以用goagent的php模式啊。And so，下面就来说说这玩意吧。稍微折腾一点！！！

---

　　要完成这件伟大的事情，首先你得有一个php空间，并且呢,这个空间得是国外的没有被GW屏蔽的，你要问这可咋整呢？不要急，这里准备了个好用的空间<sup><a href='#id1'>[1]</a></sup>（不抵制日货的继续/或者按照这个传说中的要求<sup><a href='#id2'>[2]</a></sup>自己寻找）：[XREA](http://www.xrea.com)。要使用这个空间首先要具备的条件是良好的日语基础或者是一个好用的翻译工具。具体的注册及使用教材请看[这里](http://www.freehao123.com/xrea/)(这里提供了很多免费的空间).

　　注册完成后他会把帐号密码等一系列的信息都发到你注册用的邮箱里面，稍等片刻，直接用ftp客户端登录，登录成功后将你下载的goagent/server文件夹里面的php这个文件夹上传到根目录，XREA的是public_html文件夹。上传之前改一下index.php中 `
　　$__password__ = '123456';` 的 `123456` 为你自己的密码。上传后的文件夹的名字和里面那个index.php文件的名字随意（这里假定不变）。

　　上次完成后，稍等片刻，在浏览器里面输入 `你的二级域名/php/index.php` 访问你的index.php文件，如果不出意外网页会跳转到www.xrea.com，这也说明很okay，接下来就要配置 goagent/local/proxy.ini 文件了。

　　基本上只要配置这一块就好了：

	[php]
	enable = 1		    #这里置为1
	password = 123456	#这里的密码改成你之前修改的那个密码
	crlf = 0
	validate = 0
	listen = 127.0.0.1:8088
	fetchserver = http://你的二级域名/php/index.php

　　这个弄完就算okay，如果你的浏览器使用了自动切换代理的话，改一下就好了。我非常喜欢chrome以及及其衍生版本，使用SwitchySharp能够非常方便的代理，火狐的话autoproxy已经常年没人更新了，不好用。

---

* 对于XREA这个空间，不时的会出现403，这样的话我们的代理也就不能用了。当我出现这个问题的时候还以为是文件权限问题，改了权限依旧如此，后来才发现是这个问题：据说官方的解释是为了防Spam，而限制非日本IP，嘿嘿，这明明就是不想让非日IP用嘛！不过我们还是有办法的：在根目录或者其他目录下新建一个．htaccess文件，内容如下：

	  	order allow,deny
	  	allow from all

* ．htaccess在这里还可以去广告，加入如下代码：

		LayoutIgnoreURI *

  	不过我想说的是没有必要这么做：第一，别人本来就给你提供了免费空间，让别人从广告赚点钱也是应该的；第二，我们只是用它做代理，又没有页面，去不去广告有什么区别呢；第三，听说去广告的话会删帐号的哦

* ．htaccess在这里还有一项技能，那就是自定义错误页面，对于有强迫症的人可能看不惯默认的错误页，所以可以自定义，格式如下：

		ErrorDocument 401 /401.html
		ErrorDocument 402 /402.html
		ErrorDocument 403 /403.html
		ErrorDocument 404 /404.html

	`/` 代表的是你的站点的根目录，另外根目录下面应该真的有 **401.html** 、 **402.html** 等文件

---

<span id='id1'>[1]:由于角色设定为穷酸学生党，所以继续免费的走起。</span>

<span id='id2'>[2]：
>1. curl模块或者allow_url_fopen打开
>2. zlib压缩模块
>3. php空间不能有广告。
</span>